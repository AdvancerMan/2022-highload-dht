Сервер, wrk и async-profiler запускались через wsl

Нагрузочное тестирование запускалось со следующими параметрами:
  -Длительность 60 секунд
  -Число потоков 1
  -Число соединений 1
  -Rate 5000 для PUT запросов и 2500 для GET

Размер таблицы в памяти dao равен 1 МБ

//---------------------------------------------------PUT---------------------------------------------------\\

CPU:
    Среднее время обработки запроса составляет 0.96 ms, максимальное - 27.04 ms
    Из результатов профилирования следует, что обработка запроса (one.nio.net.Session.process) занимает 72.46%
    процессорного времени, из которых только 1.92% - выполнение метода upsert в dao 
    Таким образом, разница между средним и максимальным временем объясняется тем, что сервер не успевает
    обрабатывать запросы.
    Единственное решение для увеличения производительности в данном случае - сделать сервер асинхронным.

Alloc:
    9.47% отводится на перевод массива байт в строку (dao на строках)
    15.57 на сам метод handlePut из DemoService
    13.36 для записи на диск в dao
    Остальное - для обработки запроса с помощью one.nio
    Возможная оптимизация - использование dao, не требующее переводов массивов строк в байты.

//---------------------------------------------------GET---------------------------------------------------\\

CPU:
    Среднее время обработки запроса составляет 1.1 ms, максимальное - 5.56 ms
    Из результатов профилирования следует, что обработка запроса (one.nio.net.Session.process) занимает 70.07%
    процессорного времени, из которых 24.74% - выполнение метода get в dao.
    С увеличением числа вставленных элементов увеличивается число файлов на диске по которым требуется выполнять поиск
    увеличивается, время на поиск элемента - 16.5%.
    Таким образом, разница между средним и максимальным временем объясняется тем, что сервер не успевает
    обрабатывать запросы и отсутствием вызова метода compact, также некоторые элементы находятся в памяти, 
    что сильно ускоряет скорость доступа к ним.
    Возможные решения для увеличения производительности в данном случае - сделать сервер асинхронным и добавить вызовы 
    compact в автоматическом или ручном режиме.

Alloc:
    94.98% отводится на выполнение метода get в dao
    из них:
        12.5% на создание MergeIterator
        34.25% на чтение value (22.42% на перевод в строку)
        29.86% на чтение key (29.86% на перевод в строку)
        14.76% на бинарный поиск
    Возможные решения для оптимизации: улучшение использования памяти в бинарном поиске и MergeIterator,
    использование dao не требующее переводов массивов строк в байты.

Подробные результаты нагрузочного тестирования находятся в папке /reports/wrk
Подробные результаты профилирования(heatmap) находятся в папке /reports/async-profiler
    
    

