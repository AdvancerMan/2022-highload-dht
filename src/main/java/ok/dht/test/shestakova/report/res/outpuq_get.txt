       bytes  percent  samples  top
  ----------  -------  -------  ---
 17192771568   84.23%        0  jdk.internal.foreign.MappedMemorySegmentImpl.dup
  1979516928    9.70%        0  ok.dht.test.shestakova.dao.Storage.iterate
   505880576    2.48%        0  ok.dht.test.shestakova.dao.Storage.entryAt
   315068416    1.54%        0  java.util.Arrays.copyOf
   112748544    0.55%        0  java.util.PriorityQueue.<init>
    28280832    0.14%        0  java.util.concurrent.ConcurrentSkipListMap.tailMap
    27779072    0.14%        0  ok.dht.test.shestakova.dao.MemorySegmentDao.getFromTmpState
    22011904    0.11%        0  one.nio.http.Request.<init>
    21485568    0.11%        0  java.lang.invoke.DirectMethodHandle.allocateInstance
    19408896    0.10%        0  java.util.concurrent.ConcurrentSkipListMap$Values.iterator
    17838080    0.09%        0  one.nio.util.Utf8.toAsciiString
    17303552    0.08%        0  one.nio.http.Response.<init>
    16791552    0.08%        0  ok.dht.test.shestakova.dao.MergeIterator.of
    16769024    0.08%        0  one.nio.util.ByteArrayBuilder.<init>
    16244736    0.08%        0  java.util.ArrayList.grow
    13641728    0.07%        0  java.util.Arrays.copyOfRange
    12040192    0.06%        0  java.lang.StringLatin1.newString
    11003904    0.05%        0  java.util.ImmutableCollections$AbstractImmutableList.iterator
     9437184    0.05%        0  java.util.ImmutableCollections.listFromTrustedArray
     9431040    0.05%        0  java.util.ArrayList.iterator
     7862272    0.04%        0  one.nio.net.Session.write
     7860224    0.04%        0  one.nio.http.HttpSession.parseRequest
     7856128    0.04%        0  ok.dht.test.shestakova.DemoService.handleGet
     6817792    0.03%        0  jdk.internal.foreign.HeapMemorySegmentImpl$OfByte.fromArray
     6813696    0.03%        0  java.util.concurrent.ConcurrentSkipListMap$SubMap.values
     5242880    0.03%        0  java.util.List.of
     4198400    0.02%        0  jdk.internal.foreign.AbstractMemorySegmentImpl.lambda$toByteArray$0
      519240    0.00%        0  one.nio.net.NativeSocket.read
        3000    0.00%        0  one.nio.http.HttpServer.createSession
        2064    0.00%        0  one.nio.http.HttpSession.<init>


alina@alina-VivoBook-ASUSLaptop-X580GD-N580GD:~/Home/technopolis/2022-highload-dht/async-profiler$ wrk -t 1 -c 1 -d 30 -R 10000 -s get.lua -L http://localhost:19234
Running 30s test @ http://localhost:19234
  1 threads and 1 connections
  Thread calibration: mean lat.: 717.536ms, rate sampling interval: 2367ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     2.76s   922.86ms   4.35s    56.46%
    Req/Sec     8.47k   193.94     8.97k    87.50%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    2.77s
 75.000%    3.58s
 90.000%    4.04s
 99.000%    4.33s
 99.900%    4.35s
 99.990%    4.36s
 99.999%    4.36s
100.000%    4.36s

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

    1293.311     0.000000           50         1.00
    1462.271     0.100000        16934         1.11
    1762.303     0.200000        33878         1.25
    2113.535     0.300000        50824         1.43
    2443.263     0.400000        67834         1.67
    2768.895     0.500000        84693         2.00
    2926.591     0.550000        93168         2.22
    3074.047     0.600000       101609         2.50
    3229.695     0.650000       110129         2.86
    3397.631     0.700000       118546         3.33
    3579.903     0.750000       127071         4.00
    3653.631     0.775000       131282         4.44
    3733.503     0.800000       135501         5.00
    3813.375     0.825000       139779         5.71
    3889.151     0.850000       143980         6.67
    3964.927     0.875000       148141         8.00
    4007.935     0.887500       150326         8.89
    4044.799     0.900000       152477        10.00
    4081.663     0.912500       154557        11.43
    4124.671     0.925000       156685        13.33
    4163.583     0.937500       158781        16.00
    4182.015     0.943750       159834        17.78
    4202.495     0.950000       160967        20.00
    4222.975     0.956250       162033        22.86
    4239.359     0.962500       162973        26.67
    4259.839     0.968750       164072        32.00
    4268.031     0.971875       164585        35.56
    4280.319     0.975000       165282        40.00
    4288.511     0.978125       165705        45.71
    4300.799     0.981250       166298        53.33
    4308.991     0.984375       166700        64.00
    4317.183     0.985938       167170        71.11
    4321.279     0.987500       167428        80.00
    4325.375     0.989062       167620        91.43
    4329.471     0.990625       167845       106.67
    4333.567     0.992188       168076       128.00
    4337.663     0.992969       168320       142.22
    4337.663     0.993750       168320       160.00
    4341.759     0.994531       168508       182.86
    4345.855     0.995313       168743       213.33
    4345.855     0.996094       168743       256.00
    4345.855     0.996484       168743       284.44
    4349.951     0.996875       168977       320.00
    4349.951     0.997266       168977       365.71
    4349.951     0.997656       168977       426.67
    4349.951     0.998047       168977       512.00
    4354.047     0.998242       169189       568.89
    4354.047     0.998437       169189       640.00
    4354.047     0.998633       169189       731.43
    4354.047     0.998828       169189       853.33
    4354.047     0.999023       169189      1024.00
    4354.047     0.999121       169189      1137.78
    4354.047     0.999219       169189      1280.00
    4354.047     0.999316       169189      1462.86
    4358.143     0.999414       169304      1706.67
    4358.143     1.000000       169304          inf
#[Mean    =     2761.846, StdDeviation   =      922.856]
#[Max     =     4354.048, Total count    =       169304]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  256434 requests in 30.00s, 16.52MB read
Requests/sec:   8547.96
Transfer/sec:    564.02KB
alina@alina-VivoBook-ASUSLaptop-X580GD-N580GD:~/Home/technopolis/2022-highload-dht/async-profiler$ wrk -t 1 -c 1 -d 30 -R 9000 -s get.lua -L http://localhost:19234
Running 30s test @ http://localhost:19234
  1 threads and 1 connections
  Thread calibration: mean lat.: 214.454ms, rate sampling interval: 610ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.03s   502.40ms   1.80s    59.07%
    Req/Sec     8.32k   477.77     9.52k    81.25%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.13s
 75.000%    1.46s
 90.000%    1.66s
 99.000%    1.79s
 99.900%    1.80s
 99.990%    1.81s
 99.999%    1.81s
100.000%    1.81s

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

     210.687     0.000000            3         1.00
     261.631     0.100000        16645         1.11
     357.887     0.200000        33280         1.25
     734.207     0.300000        49868         1.43
     905.727     0.400000        66493         1.67
    1128.447     0.500000        83183         2.00
    1179.647     0.550000        91593         2.22
    1260.543     0.600000        99747         2.50
    1334.271     0.650000       108213         2.86
    1400.831     0.700000       116411         3.33
    1457.151     0.750000       124724         4.00
    1490.943     0.775000       128862         4.44
    1512.447     0.800000       133031         5.00
    1551.359     0.825000       137207         5.71
    1585.151     0.850000       141412         6.67
    1620.991     0.875000       145556         8.00
    1636.351     0.887500       147534         8.89
    1655.807     0.900000       149674        10.00
    1671.167     0.912500       151905        11.43
    1689.599     0.925000       153808        13.33
    1709.055     0.937500       155873        16.00
    1718.271     0.943750       156960        17.78
    1729.535     0.950000       157971        20.00
    1745.919     0.956250       159030        22.86
    1754.111     0.962500       160004        26.67
    1766.399     0.968750       161083        32.00
    1772.543     0.971875       161669        35.56
    1775.615     0.975000       162078        40.00
    1779.711     0.978125       162785        45.71
    1782.783     0.981250       163117        53.33
    1786.879     0.984375       163835        64.00
    1787.903     0.985938       163936        71.11
    1789.951     0.987500       164169        80.00
    1791.999     0.989062       164436        91.43
    1794.047     0.990625       164836       106.67
    1796.095     0.992188       165033       128.00
    1797.119     0.992969       165191       142.22
    1797.119     0.993750       165191       160.00
    1798.143     0.994531       165421       182.86
    1799.167     0.995313       165572       213.33
    1800.191     0.996094       165708       256.00
    1800.191     0.996484       165708       284.44
    1800.191     0.996875       165708       320.00
    1801.215     0.997266       165801       365.71
    1802.239     0.997656       165936       426.67
    1802.239     0.998047       165936       512.00
    1802.239     0.998242       165936       568.89
    1803.263     0.998437       166080       640.00
    1803.263     0.998633       166080       731.43
    1803.263     0.998828       166080       853.33
    1803.263     0.999023       166080      1024.00
    1803.263     0.999121       166080      1137.78
    1804.287     0.999219       166181      1280.00
    1804.287     0.999316       166181      1462.86
    1804.287     0.999414       166181      1706.67
    1804.287     0.999512       166181      2048.00
    1804.287     0.999561       166181      2275.56
    1804.287     0.999609       166181      2560.00
    1804.287     0.999658       166181      2925.71
    1804.287     0.999707       166181      3413.33
    1805.311     0.999756       166225      4096.00
    1805.311     1.000000       166225          inf
#[Mean    =     1027.452, StdDeviation   =      502.404]
#[Max     =     1804.288, Total count    =       166225]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  253755 requests in 30.00s, 16.35MB read
Requests/sec:   8458.60
Transfer/sec:    558.09KB
alina@alina-VivoBook-ASUSLaptop-X580GD-N580GD:~/Home/technopolis/2022-highload-dht/async-profiler$ wrk -t 1 -c 1 -d 30 -R 8000 -s get.lua -L http://localhost:19234
Running 30s test @ http://localhost:19234
  1 threads and 1 connections
  Thread calibration: mean lat.: 47.132ms, rate sampling interval: 365ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.62ms    3.17ms  26.14ms   92.95%
    Req/Sec     8.01k    83.73     8.39k    88.89%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  831.00us
 75.000%    1.14ms
 90.000%    2.97ms
 99.000%   20.66ms
 99.900%   25.69ms
 99.990%   26.09ms
 99.999%   26.16ms
100.000%   26.16ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.098     0.000000            1         1.00
       0.277     0.100000        16057         1.11
       0.424     0.200000        32038         1.25
       0.564     0.300000        48031         1.43
       0.700     0.400000        63995         1.67
       0.831     0.500000        79997         2.00
       0.895     0.550000        88036         2.22
       0.957     0.600000        96080         2.50
       1.017     0.650000       104013         2.86
       1.079     0.700000       112005         3.33
       1.140     0.750000       120053         4.00
       1.172     0.775000       123980         4.44
       1.268     0.800000       127985         5.00
       1.417     0.825000       131984         5.71
       1.634     0.850000       135976         6.67
       2.053     0.875000       139972         8.00
       2.447     0.887500       141974         8.89
       2.971     0.900000       143976        10.00
       3.713     0.912500       145972        11.43
       4.479     0.925000       147976        13.33
       5.207     0.937500       149974        16.00
       5.719     0.943750       150973        17.78
       6.175     0.950000       151979        20.00
       6.651     0.956250       152969        22.86
       7.955     0.962500       153968        26.67
       9.327     0.968750       154979        32.00
      10.279     0.971875       155466        35.56
      11.351     0.975000       155970        40.00
      12.191     0.978125       156469        45.71
      13.247     0.981250       156968        53.33
      16.127     0.984375       157466        64.00
      17.695     0.985938       157719        71.11
      18.463     0.987500       157967        80.00
      19.823     0.989062       158218        91.43
      20.895     0.990625       158468       106.67
      21.663     0.992188       158719       128.00
      21.903     0.992969       158844       142.22
      22.479     0.993750       158967       160.00
      23.327     0.994531       159092       182.86
      23.919     0.995313       159218       213.33
      24.463     0.996094       159341       256.00
      24.879     0.996484       159403       284.44
      25.231     0.996875       159471       320.00
      25.311     0.997266       159530       365.71
      25.439     0.997656       159591       426.67
      25.551     0.998047       159670       512.00
      25.583     0.998242       159695       568.89
      25.615     0.998437       159717       640.00
      25.647     0.998633       159759       731.43
      25.663     0.998828       159780       853.33
      25.695     0.999023       159815      1024.00
      25.711     0.999121       159831      1137.78
      25.727     0.999219       159850      1280.00
      25.743     0.999316       159859      1462.86
      25.775     0.999414       159881      1706.67
      25.791     0.999512       159887      2048.00
      25.823     0.999561       159896      2275.56
      25.855     0.999609       159906      2560.00
      25.903     0.999658       159913      2925.71
      25.935     0.999707       159924      3413.33
      25.951     0.999756       159926      4096.00
      25.983     0.999780       159931      4551.11
      26.015     0.999805       159935      5120.00
      26.047     0.999829       159939      5851.43
      26.079     0.999854       159944      6826.67
      26.095     0.999878       159949      8192.00
      26.095     0.999890       159949      9102.22
      26.111     0.999902       159954     10240.00
      26.111     0.999915       159954     11702.86
      26.111     0.999927       159954     13653.33
      26.127     0.999939       159956     16384.00
      26.143     0.999945       159962     18204.44
      26.143     0.999951       159962     20480.00
      26.143     0.999957       159962     23405.71
      26.143     0.999963       159962     27306.67
      26.143     0.999969       159962     32768.00
      26.143     0.999973       159962     36408.89
      26.143     0.999976       159962     40960.00
      26.143     0.999979       159962     46811.43
      26.159     0.999982       159965     54613.33
      26.159     1.000000       159965          inf
#[Mean    =        1.619, StdDeviation   =        3.169]
#[Max     =       26.144, Total count    =       159965]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  239993 requests in 30.00s, 15.46MB read
Requests/sec:   7999.87
Transfer/sec:    527.62KB

