Нагрузочное тестирование PUT в 64 потока, 64 соединения с 2 нодами:
-

> wrk -t 64 -c 64 -R 20000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

64 threads and 64 connections

Thread calibration: mean lat.: 3.562ms, rate sampling interval: 10ms

...

Thread calibration: mean lat.: 3.506ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency     0.98ms   333.41us   7.47ms      63.88%
    Req/Sec       5.13      41.09   500.00      98.44%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    0.98ms
    75.000%    1.24ms
    90.000%    1.40ms
    99.000%    1.71ms
    99.900%    1.95ms
    99.990%    4.28ms
    99.999%    7.47ms
    100.000%   7.47ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.113     0.000000            1         1.00
       0.545     0.100000         1576         1.11
       0.663     0.200000         3134         1.25
       0.771     0.300000         4690         1.43
       0.877     0.400000         6258         1.67
       0.982     0.500000         7820         2.00
       1.032     0.550000         8604         2.22
       1.081     0.600000         9375         2.50
       1.134     0.650000        10155         2.86
       1.184     0.700000        10944         3.33
       1.235     0.750000        11721         4.00
       1.262     0.775000        12106         4.44
       1.289     0.800000        12497         5.00
       1.314     0.825000        12888         5.71
       1.342     0.850000        13280         6.67
       1.368     0.875000        13678         8.00
       1.382     0.887500        13871         8.89
       1.399     0.900000        14073        10.00
       1.416     0.912500        14273        11.43
       1.436     0.925000        14457        13.33
       1.464     0.937500        14647        16.00
       1.480     0.943750        14749        17.78
       1.493     0.950000        14841        20.00
       1.510     0.956250        14942        22.86
       1.530     0.962500        15035        26.67
       1.552     0.968750        15132        32.00
       1.569     0.971875        15184        35.56
       1.583     0.975000        15233        40.00
       1.602     0.978125        15283        45.71
       1.620     0.981250        15330        53.33
       1.643     0.984375        15378        64.00
       1.657     0.985938        15402        71.11
       1.674     0.987500        15425        80.00
       1.695     0.989062        15452        91.43
       1.712     0.990625        15475       106.67
       1.734     0.992188        15499       128.00
       1.744     0.992969        15511       142.22
       1.757     0.993750        15523       160.00
       1.775     0.994531        15536       182.86
       1.790     0.995313        15547       213.33
       1.804     0.996094        15559       256.00
       1.823     0.996484        15566       284.44
       1.833     0.996875        15573       320.00
       1.846     0.997266        15579       365.71
       1.862     0.997656        15584       426.67
       1.881     0.998047        15590       512.00
       1.896     0.998242        15593       568.89
       1.913     0.998437        15596       640.00
       1.930     0.998633        15600       731.43
       1.938     0.998828        15602       853.33
       1.971     0.999023        15605      1024.00
       2.001     0.999121        15607      1137.78
       2.002     0.999219        15608      1280.00
       2.009     0.999316        15610      1462.86
       2.025     0.999414        15611      1706.67
       2.075     0.999512        15613      2048.00
       2.097     0.999561        15614      2275.56
       2.097     0.999609        15614      2560.00
       2.109     0.999658        15615      2925.71
       2.323     0.999707        15616      3413.33
       2.451     0.999756        15617      4096.00
       2.451     0.999780        15617      4551.11
       2.451     0.999805        15617      5120.00
       4.279     0.999829        15618      5851.43
       4.279     0.999854        15618      6826.67
       4.995     0.999878        15619      8192.00
       4.995     0.999890        15619      9102.22
       4.995     0.999902        15619     10240.00
       4.995     0.999915        15619     11702.86
       4.995     0.999927        15619     13653.33
       7.471     0.999939        15620     16384.00
       7.471     1.000000        15620          inf
***
    #[Mean    =        0.981, StdDeviation   =        0.333]
    #[Max     =        7.468, Total count    =        15620]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
18748 requests in 1.00m, 1.20MB read

Socket errors: connect 0, read 0, write 0, timeout 1890

Requests/sec:    312.38

Transfer/sec:     20.44KB

Нагрузочное тестирование PUT в 64 потока, 64 соединения с 5 нодами:
-

> wrk -t 64 -c 64 -R 20000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

64 threads and 64 connections

Thread calibration: mean lat.: 3.319ms, rate sampling interval: 10ms

...

Thread calibration: mean lat.: 3.001ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency     0.94ms   334.57us   7.36ms      64.93%
    Req/Sec      20.53      80.28   555.00      93.75%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    0.93ms
    75.000%    1.19ms
    90.000%    1.36ms
    99.000%    1.56ms
    99.900%    2.38ms
    99.990%    6.26ms
    99.999%    7.30ms
    100.000%   7.37ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.130     0.000000            1         1.00
       0.517     0.100000         6266         1.11
       0.627     0.200000        12497         1.25
       0.731     0.300000        18744         1.43
       0.832     0.400000        25049         1.67
       0.934     0.500000        31244         2.00
       0.983     0.550000        34366         2.22
       1.035     0.600000        37531         2.50
       1.084     0.650000        40639         2.86
       1.134     0.700000        43786         3.33
       1.187     0.750000        46902         4.00
       1.214     0.775000        48444         4.44
       1.244     0.800000        50006         5.00
       1.273     0.825000        51580         5.71
       1.302     0.850000        53164         6.67
       1.328     0.875000        54670         8.00
       1.343     0.887500        55475         8.89
       1.358     0.900000        56279        10.00
       1.372     0.912500        57015        11.43
       1.388     0.925000        57801        13.33
       1.406     0.937500        58590        16.00
       1.415     0.943750        58996        17.78
       1.426     0.950000        59378        20.00
       1.438     0.956250        59779        22.86
       1.450     0.962500        60166        26.67
       1.465     0.968750        60551        32.00
       1.473     0.971875        60729        35.56
       1.483     0.975000        60927        40.00
       1.493     0.978125        61122        45.71
       1.505     0.981250        61308        53.33
       1.521     0.984375        61518        64.00
       1.529     0.985938        61602        71.11
       1.539     0.987500        61701        80.00
       1.551     0.989062        61799        91.43
       1.563     0.990625        61894       106.67
       1.580     0.992188        61993       128.00
       1.589     0.992969        62043       142.22
       1.599     0.993750        62089       160.00
       1.613     0.994531        62139       182.86
       1.629     0.995313        62188       213.33
       1.646     0.996094        62235       256.00
       1.657     0.996484        62260       284.44
       1.676     0.996875        62284       320.00
       1.692     0.997266        62309       365.71
       1.715     0.997656        62333       426.67
       1.750     0.998047        62357       512.00
       1.789     0.998242        62370       568.89
       1.845     0.998437        62382       640.00
       1.923     0.998633        62394       731.43
       2.169     0.998828        62406       853.33
       2.411     0.999023        62418      1024.00
       2.633     0.999121        62425      1137.78
       2.873     0.999219        62431      1280.00
       3.243     0.999316        62437      1462.86
       3.547     0.999414        62443      1706.67
       3.847     0.999512        62449      2048.00
       4.179     0.999561        62452      2275.56
       4.291     0.999609        62455      2560.00
       4.407     0.999658        62458      2925.71
       4.727     0.999707        62461      3413.33
       5.003     0.999756        62464      4096.00
       5.199     0.999780        62466      4551.11
       5.247     0.999805        62467      5120.00
       5.591     0.999829        62469      5851.43
       5.839     0.999854        62470      6826.67
       6.239     0.999878        62472      8192.00
       6.259     0.999890        62473      9102.22
       6.259     0.999902        62473     10240.00
       6.375     0.999915        62474     11702.86
       6.531     0.999927        62475     13653.33
       6.659     0.999939        62476     16384.00
       6.659     0.999945        62476     18204.44
       6.659     0.999951        62476     20480.00
       7.059     0.999957        62477     23405.71
       7.059     0.999963        62477     27306.67
       7.299     0.999969        62478     32768.00
       7.299     0.999973        62478     36408.89
       7.299     0.999976        62478     40960.00
       7.299     0.999979        62478     46811.43
       7.299     0.999982        62478     54613.33
       7.367     0.999985        62479     65536.00
       7.367     1.000000        62479          inf
***
    #[Mean    =        0.936, StdDeviation   =        0.335]
    #[Max     =        7.364, Total count    =        62479]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
74991 requests in 1.00m, 4.79MB read

Socket errors: connect 0, read 0, write 0, timeout 1800

Requests/sec:   1249.47

Transfer/sec:     81.75KB

Нагрузочное тестирование GET в 64 потока, 64 соединения с 2 нодами:
-

> wrk -t 64 -c 64 -R 15000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

64 threads and 64 connections

Thread calibration: mean lat.: 1.092ms, rate sampling interval: 10ms

...

Thread calibration: mean lat.: 1.166ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency     0.90ms   366.01us  11.78ms      69.53%
    Req/Sec     248.06      50.37   555.00      64.30%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    0.89ms
    75.000%    1.14ms
    90.000%    1.33ms
    99.000%    1.64ms
    99.900%    3.31ms
    99.990%    7.92ms
    99.999%   11.05ms
    100.000%  11.78ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.100     0.000000            1         1.00
       0.449     0.100000        75077         1.11
       0.574     0.200000       150125         1.25
       0.683     0.300000       225358         1.43
       0.787     0.400000       299930         1.67
       0.890     0.500000       375468         2.00
       0.941     0.550000       413169         2.22
       0.992     0.600000       450650         2.50
       1.043     0.650000       488010         2.86
       1.094     0.700000       525452         3.33
       1.145     0.750000       562851         4.00
       1.171     0.775000       581735         4.44
       1.197     0.800000       600224         5.00
       1.224     0.825000       618611         5.71
       1.254     0.850000       637340         6.67
       1.288     0.875000       656169         8.00
       1.307     0.887500       665630         8.89
       1.328     0.900000       675250        10.00
       1.349     0.912500       684218        11.43
       1.374     0.925000       693845        13.33
       1.401     0.937500       703075        16.00
       1.417     0.943750       707933        17.78
       1.433     0.950000       712517        20.00
       1.451     0.956250       717090        22.86
       1.471     0.962500       721755        26.67
       1.494     0.968750       726501        32.00
       1.507     0.971875       728805        35.56
       1.522     0.975000       731154        40.00
       1.538     0.978125       733440        45.71
       1.557     0.981250       735807        53.33
       1.580     0.984375       738181        64.00
       1.593     0.985938       739325        71.11
       1.608     0.987500       740491        80.00
       1.625     0.989062       741640        91.43
       1.647     0.990625       742809       106.67
       1.673     0.992188       743969       128.00
       1.691     0.992969       744543       142.22
       1.712     0.993750       745131       160.00
       1.739     0.994531       745716       182.86
       1.777     0.995313       746295       213.33
       1.837     0.996094       746881       256.00
       1.885     0.996484       747174       284.44
       1.960     0.996875       747466       320.00
       2.087     0.997266       747757       365.71
       2.241     0.997656       748050       426.67
       2.463     0.998047       748343       512.00
       2.603     0.998242       748491       568.89
       2.757     0.998437       748636       640.00
       2.921     0.998633       748784       731.43
       3.111     0.998828       748929       853.33
       3.337     0.999023       749075      1024.00
       3.489     0.999121       749148      1137.78
       3.637     0.999219       749222      1280.00
       3.845     0.999316       749295      1462.86
       4.029     0.999414       749369      1706.67
       4.311     0.999512       749441      2048.00
       4.487     0.999561       749479      2275.56
       4.659     0.999609       749515      2560.00
       4.959     0.999658       749552      2925.71
       5.247     0.999707       749588      3413.33
       5.687     0.999756       749624      4096.00
       5.955     0.999780       749643      4551.11
       6.251     0.999805       749661      5120.00
       6.551     0.999829       749679      5851.43
       6.963     0.999854       749698      6826.67
       7.419     0.999878       749716      8192.00
       7.667     0.999890       749725      9102.22
       7.983     0.999902       749734     10240.00
       8.191     0.999915       749743     11702.86
       8.559     0.999927       749753     13653.33
       8.791     0.999939       749763     16384.00
       8.919     0.999945       749766     18204.44
       9.183     0.999951       749771     20480.00
       9.631     0.999957       749775     23405.71
       9.943     0.999963       749780     27306.67
      10.183     0.999969       749785     32768.00
      10.311     0.999973       749787     36408.89
      10.367     0.999976       749789     40960.00
      10.423     0.999979       749791     46811.43
      10.695     0.999982       749794     54613.33
      10.807     0.999985       749796     65536.00
      10.903     0.999986       749798     72817.78
      10.903     0.999988       749798     81920.00
      10.919     0.999989       749799     93622.86
      11.127     0.999991       749801    109226.67
      11.215     0.999992       749802    131072.00
      11.215     0.999993       749802    145635.56
      11.327     0.999994       749803    163840.00
      11.327     0.999995       749803    187245.71
      11.439     0.999995       749804    218453.33
      11.471     0.999996       749805    262144.00
      11.471     0.999997       749805    291271.11
      11.471     0.999997       749805    327680.00
      11.471     0.999997       749805    374491.43
      11.487     0.999998       749806    436906.67
      11.487     0.999998       749806    524288.00
      11.487     0.999998       749806    582542.22
      11.487     0.999998       749806    655360.00
      11.487     0.999999       749806    748982.86
      11.783     0.999999       749807    873813.33
      11.783     1.000000       749807          inf
***
    #[Mean    =        0.897, StdDeviation   =        0.366]
    #[Max     =       11.776, Total count    =       749807]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
899951 requests in 1.00m, 58.27MB read

Requests/sec:  15003.07

Transfer/sec:      0.97MB

Нагрузочное тестирование GET в 64 потока, 64 соединения с 5 нодами:
-

> wrk -t 64 -c 64 -R 15000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

64 threads and 64 connections

Thread calibration: mean lat.: 0.990ms, rate sampling interval: 10ms

...

Thread calibration: mean lat.: 0.994ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency     0.89ms   338.58us  12.60ms      66.98%
    Req/Sec     248.05      49.40   500.00      64.29%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    0.89ms
    75.000%    1.13ms
    90.000%    1.30ms
    99.000%    1.58ms
    99.900%    2.95ms
    99.990%    4.99ms
    99.999%    6.55ms
    100.000%  12.61ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.092     0.000000            1         1.00
       0.453     0.100000        75095         1.11
       0.580     0.200000       150303         1.25
       0.688     0.300000       225620         1.43
       0.789     0.400000       300561         1.67
       0.888     0.500000       375643         2.00
       0.937     0.550000       412991         2.22
       0.986     0.600000       450572         2.50
       1.034     0.650000       487757         2.86
       1.083     0.700000       525218         3.33
       1.132     0.750000       562514         4.00
       1.157     0.775000       581417         4.44
       1.183     0.800000       600554         5.00
       1.209     0.825000       619279         5.71
       1.237     0.850000       637954         6.67
       1.268     0.875000       656724         8.00
       1.285     0.887500       666052         8.89
       1.303     0.900000       674998        10.00
       1.323     0.912500       684294        11.43
       1.346     0.925000       693753        13.33
       1.372     0.937500       703275        16.00
       1.386     0.943750       707928        17.78
       1.401     0.950000       712504        20.00
       1.418     0.956250       717180        22.86
       1.436     0.962500       721797        26.67
       1.458     0.968750       726611        32.00
       1.469     0.971875       728841        35.56
       1.482     0.975000       731146        40.00
       1.497     0.978125       733592        45.71
       1.513     0.981250       735928        53.33
       1.532     0.984375       738172        64.00
       1.544     0.985938       739378        71.11
       1.556     0.987500       740502        80.00
       1.571     0.989062       741718        91.43
       1.590     0.990625       742896       106.67
       1.611     0.992188       744024       128.00
       1.625     0.992969       744615       142.22
       1.643     0.993750       745210       160.00
       1.664     0.994531       745789       182.86
       1.692     0.995313       746362       213.33
       1.738     0.996094       746945       256.00
       1.768     0.996484       747237       284.44
       1.820     0.996875       747535       320.00
       1.905     0.997266       747822       365.71
       2.041     0.997656       748116       426.67
       2.233     0.998047       748408       512.00
       2.357     0.998242       748557       568.89
       2.483     0.998437       748702       640.00
       2.633     0.998633       748847       731.43
       2.801     0.998828       748995       853.33
       2.971     0.999023       749140      1024.00
       3.075     0.999121       749213      1137.78
       3.185     0.999219       749287      1280.00
       3.317     0.999316       749360      1462.86
       3.471     0.999414       749433      1706.67
       3.651     0.999512       749506      2048.00
       3.721     0.999561       749543      2275.56
       3.867     0.999609       749581      2560.00
       3.977     0.999658       749619      2925.71
       4.115     0.999707       749653      3413.33
       4.279     0.999756       749689      4096.00
       4.363     0.999780       749709      4551.11
       4.455     0.999805       749726      5120.00
       4.571     0.999829       749745      5851.43
       4.711     0.999854       749763      6826.67
       4.875     0.999878       749782      8192.00
       4.935     0.999890       749791      9102.22
       5.035     0.999902       749799     10240.00
       5.099     0.999915       749808     11702.86
       5.179     0.999927       749818     13653.33
       5.267     0.999939       749827     16384.00
       5.299     0.999945       749831     18204.44
       5.427     0.999951       749837     20480.00
       5.551     0.999957       749840     23405.71
       5.671     0.999963       749845     27306.67
       5.755     0.999969       749850     32768.00
       5.831     0.999973       749852     36408.89
       5.887     0.999976       749854     40960.00
       5.915     0.999979       749856     46811.43
       6.123     0.999982       749859     54613.33
       6.323     0.999985       749861     65536.00
       6.383     0.999986       749862     72817.78
       6.467     0.999988       749863     81920.00
       6.507     0.999989       749864     93622.86
       6.891     0.999991       749866    109226.67
       6.919     0.999992       749867    131072.00
       6.919     0.999993       749867    145635.56
       7.059     0.999994       749868    163840.00
       7.059     0.999995       749868    187245.71
       8.295     0.999995       749869    218453.33
       8.775     0.999996       749870    262144.00
       8.775     0.999997       749870    291271.11
       8.775     0.999997       749870    327680.00
       8.775     0.999997       749870    374491.43
      10.679     0.999998       749871    436906.67
      10.679     0.999998       749871    524288.00
      10.679     0.999998       749871    582542.22
      10.679     0.999998       749871    655360.00
      10.679     0.999999       749871    748982.86
      12.607     0.999999       749872    873813.33
      12.607     1.000000       749872          inf
***
    #[Mean    =        0.889, StdDeviation   =        0.339]
    #[Max     =       12.600, Total count    =       749872]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
900014 requests in 1.00m, 58.26MB read

Requests/sec:  15000.86

Transfer/sec:      0.97MB


